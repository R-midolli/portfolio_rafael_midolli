<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rafael Midolli ‚Äî Business Analyst</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,800;1,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<style>
/* ========== RESET & ROOT ========== */
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0e1117;
  --surface:rgba(255,255,255,.06);
  --surface-hover:rgba(255,255,255,.10);
  --text:#f0f2f7;
  --text-muted:#7a8494;
  --accent:#5b8cff;
  --accent-2:#8b5cf6;
  --accent-glow:rgba(91,140,255,.25);
  --border:rgba(255,255,255,.08);
  --radius:20px;
  --font-head:'Playfair Display',Georgia,serif;
  --font-body:'DM Sans',system-ui,sans-serif;
}

/* Light theme overrides */
:root[data-theme="light"]{
  --bg:#f6f7fb;
  --surface:rgba(255,255,255,.7);
  --surface-hover:rgba(255,255,255,.92);
  --text:#0e1320;
  --text-muted:rgba(14,19,32,.70);
  --grid:rgba(14,19,32,.06);
  --border:rgba(14,19,32,.10);
  --accent:#4f7cff;
  --accent-2:#7b5cff;
  --accent-glow:rgba(91,140,255,.25);
}

/* === Language visibility === */
/* When lang is set to 'fr', hide English texts and show French. When set to 'en', do the opposite. */
[data-lang="fr"] .lang-en{display:none;}
[data-lang="en"] .lang-fr{display:none;}
html{scroll-behavior:smooth;-webkit-font-smoothing:antialiased}
body{
  font-family:var(--font-body);
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  overflow-x:hidden;
  min-height:100vh;
}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
button{font-family:inherit}

/* ========== AMBIENT BACKGROUND ========== */
.bg-mesh{
  position:fixed;inset:0;z-index:0;
  pointer-events:none;
  background:
    radial-gradient(ellipse 70% 50% at 20% 20%, rgba(91,140,255,.12) 0%, transparent 70%),
    radial-gradient(ellipse 50% 60% at 80% 70%, rgba(139,92,246,.10) 0%, transparent 70%),
    radial-gradient(ellipse 40% 40% at 60% 10%, rgba(91,140,255,.06) 0%, transparent 60%);
}
.bg-grid{
  position:fixed;inset:0;z-index:0;
  pointer-events:none;
  opacity:.035;
  background-image:
    linear-gradient(rgba(255,255,255,1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,1) 1px, transparent 1px);
  background-size:60px 60px;
  mask-image:radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 80%);
  -webkit-mask-image:radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 80%);
}

/* ========== SCROLL PROGRESS ========== */
.scroll-bar{
  position:fixed;top:0;left:0;height:2px;width:0;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  z-index:100;
  transition:width .15s linear;
}

/* ========== NAV ========== */
.nav{
  position:fixed;top:0;left:0;right:0;z-index:90;
  padding:16px 0;
  transition:background .3s, backdrop-filter .3s, padding .3s;
}
.nav.scrolled{
  background:rgba(14,17,23,.7); /* Always dark background when scrolled */
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  padding:10px 0;
  border-bottom:1px solid rgba(255,255,255,0.08); /* Fixed border for dark bg */
}

/* CORRE√á√ÉO SOLICITADA: CONTRASTE NO LIGHT MODE QUANDO SCROLL */
/* Quando estiver no modo claro e a nav estiver "scrolled" (fundo escuro), for√ßar textos para branco */
:root[data-theme="light"] .nav.scrolled {
  --text: #f0f2f7; /* For√ßa texto claro dentro da nav scrollada */
  --text-muted: rgba(240, 242, 247, 0.7);
}
:root[data-theme="light"] .nav.scrolled .logo,
:root[data-theme="light"] .nav.scrolled .nav-links a {
  color: #f0f2f7; /* Garante branco */
}
:root[data-theme="light"] .nav.scrolled .nav-links a:hover {
  background: rgba(255,255,255,0.15);
  color: #fff;
}
:root[data-theme="light"] .nav.scrolled .btn-cv,
:root[data-theme="light"] .nav.scrolled .theme-toggle,
:root[data-theme="light"] .nav.scrolled .lang-toggle {
  color: #fff;
  border-color: rgba(255,255,255,0.3);
  background: transparent;
}
:root[data-theme="light"] .nav.scrolled .btn-cv:hover,
:root[data-theme="light"] .nav.scrolled .theme-toggle:hover,
:root[data-theme="light"] .nav.scrolled .lang-toggle:hover {
  background: rgba(255,255,255,0.2);
  border-color: transparent;
}

.nav-inner{
  max-width:1100px;margin:0 auto;padding:0 28px;
  display:flex;align-items:center;justify-content:space-between;
}
.logo{
  font-family:var(--font-head);
  font-weight:800;font-size:1.25rem;
  letter-spacing:-.02em;
  display:flex;align-items:center;gap:10px;
}
.logo-ring{
  width:34px;height:34px;border-radius:50%;
  border:2px solid var(--accent);
  display:flex;align-items:center;justify-content:center;
  font-size:.72rem;font-weight:700;color:var(--accent);
  font-family:var(--font-body);
}
.nav-links{display:flex;gap:6px;align-items:center}
.nav-links a{
  font-size:.85rem;font-weight:600;
  color:var(--text-muted);
  padding:8px 14px;border-radius:999px;
  transition:color .2s, background .2s;
}
.nav-links a:hover{color:var(--text);background:var(--surface)}
.nav-links a.active{color:var(--accent);background:rgba(91,140,255,.1)}
.btn-cv{
  font-size:.82rem;font-weight:700;
  color:var(--accent);
  border:1px solid rgba(91,140,255,.35);
  padding:8px 16px;border-radius:999px;
  transition:background .2s, border-color .2s;
  display:inline-flex;align-items:center;gap:6px;
}
.btn-cv:hover{background:rgba(91,140,255,.1);border-color:var(--accent)}

/* ========== HERO ========== */
.hero{
  position:relative;z-index:1;
  min-height:100vh;
  display:flex;align-items:center;
  padding:120px 0 80px;
}
.hero-inner{
  max-width:1100px;margin:0 auto;padding:0 28px;
  display:grid;grid-template-columns:1fr 380px;
  gap:60px;align-items:center;
}
/* pill badge */
.pill{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 16px;border-radius:999px;
  border:1px solid rgba(91,140,255,.25);
  background:rgba(91,140,255,.08);
  font-size:.82rem;font-weight:600;
  color:var(--accent);
  margin-bottom:24px;
}
.pill-dot{
  width:7px;height:7px;border-radius:50%;
  background:var(--accent);
  animation:pulse-dot 2s infinite;
}
@keyframes pulse-dot{
  0%,100%{opacity:1;transform:scale(1)}
  50%{opacity:.4;transform:scale(.85)}
}
.hero h1{
  font-family:var(--font-head);
  font-size:clamp(2.6rem,5vw,3.8rem);
  font-weight:800;line-height:1.08;
  letter-spacing:-.03em;
  color:var(--text);
}
.hero h1 em{
  font-style:italic;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}
.hero-desc{
  margin-top:22px;
  color:var(--text-muted);
  font-size:1.05rem;
  max-width:480px;
  line-height:1.7;
}
.hero-ctas{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-top:32px;
}
.btn-main{
  display:inline-flex;align-items:center;gap:8px;
  padding:13px 26px;border-radius:999px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;font-weight:700;font-size:.9rem;
  border:none;cursor:pointer;
  box-shadow:0 8px 30px rgba(91,140,255,.3);
  transition:transform .2s, box-shadow .2s;
}
.btn-main:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(91,140,255,.4)}
.btn-main:active{transform:translateY(0)}
.btn-outline{
  display:inline-flex;align-items:center;gap:8px;
  padding:13px 24px;border-radius:999px;
  border:1px solid var(--border);
  color:var(--text);font-weight:600;font-size:.9rem;
  background:var(--surface);
  transition:border-color .2s, background .2s;
}
.btn-outline:hover{border-color:rgba(255,255,255,.25);background:var(--surface-hover)}

/* ========== AVATAR ========== */
.avatar-wrap{
  position:relative;
  /* Reduce overall avatar size for a more compact appearance */
  width:280px;height:280px;
  margin:0 auto;
}
.avatar-blob{
  position:absolute;inset:-10px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  opacity:.35;
  filter:blur(2px);
  animation:morph 8s ease-in-out infinite;
}
@keyframes morph{
  0%,100%{border-radius:60% 40% 55% 45% / 55% 45% 55% 45%}
  25%{border-radius:45% 55% 40% 60% / 50% 60% 40% 50%}
  50%{border-radius:55% 45% 60% 40% / 45% 55% 45% 55%}
  75%{border-radius:40% 60% 45% 55% / 60% 40% 55% 45%}
}
.avatar-ring{
  position:absolute;inset:8px;
  border-radius:50%;
  /* Create a subtle glow and animated ring that interacts with the photo */
  border:2px solid var(--accent);
  box-shadow:0 0 12px var(--accent-glow) inset;
  animation:spin-slow 25s linear infinite;
}
@keyframes spin-slow{to{transform:rotate(360deg)}}
.avatar-ring::before{
  content:'';position:absolute;
  width:10px;height:10px;border-radius:50%;
  background:var(--accent);
  top:-5px;left:50%;transform:translateX(-50%);
  box-shadow:0 0 12px var(--accent);
}
.avatar-ring-2{
  position:absolute;inset:24px;
  border-radius:50%;
  /* Second ring with a softer glow */
  border:2px solid var(--accent-2);
  box-shadow:0 0 10px rgba(139,92,246,.25) inset;
  animation:spin-slow 40s linear infinite reverse;
}
.avatar-ring-2::before{
  content:'';position:absolute;
  width:7px;height:7px;border-radius:50%;
  background:var(--accent-2);
  bottom:-3.5px;left:50%;transform:translateX(-50%);
  box-shadow:0 0 10px var(--accent-2);
}
.avatar-img-wrap{
  position:absolute;inset:22px;
  border-radius:50%;
  overflow:hidden;
  /* Remove dark border and background for a cleaner look */
  border:none;
  background:transparent;
}
.avatar-img-wrap img{
  width:100%;height:100%;object-fit:cover;
  /* Slightly scale up to overlap the ring for a more integrated look */
  transform:scale(1.08);
  /* Slightly desaturated without blurring: reduce colour while keeping details */
  filter:grayscale(0.6) brightness(1.05) contrast(1);
  opacity:0.9;
}

/* Stack the avatar, biography button and bio text vertically in the second column */
.avatar-column{
  display:flex;
  flex-direction:column;
  align-items:center;
  /* Reduce vertical gap to keep the biography button close to the smaller avatar */
  gap:14px;
  position:relative; /* needed to anchor the biography popover */
  /* Smoothly animate opacity and position when scrolling */
  transition:opacity .3s ease, transform .3s ease;
}

/* Biography overlay: slides over the avatar circle */
.bio-overlay{
  position:absolute;
  top:50%;
  left:50%;
  width:360px;
  max-width:90vw;
  /* Increase max height so the biography can be taller */
  max-height:420px;
  /* Center the overlay over the circle */
  transform:translate(-50%,-50%) scale(.8);
  transform-origin:center;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:flex-start;
  padding:24px;
  /* Use a solid background instead of translucent to increase contrast */
  background:var(--bg);
  border:1px solid var(--border);
  box-shadow:0 4px 20px rgba(0,0,0,.35);
  border-radius:var(--radius);
  color:var(--text);
  font-size:.94rem;
  /* Increase line-height for better readability */
  line-height:1.7;
  text-align:left;
  /* Limit height and enable scrolling when content is longer */
  overflow-y:auto;
  opacity:0;
  pointer-events:none;
  transition:transform .35s ease, opacity .35s ease;
  z-index:50;
}
.bio-overlay.show{
  opacity:1;
  pointer-events:auto;
  transform:translate(-50%,-50%) scale(1);
}
/* Close button inside the biography overlay */
.bio-overlay .bio-close{
  position:absolute;
  top:6px;
  right:6px;
  background:transparent;
  border:none;
  color:var(--text);
  font-size:1rem;
  cursor:pointer;
  line-height:1;
}
.bio-overlay .bio-close:hover{
  color:var(--accent);
}

/* Add spacing between paragraphs in the biography overlay */
.bio-overlay p{
  margin-bottom:14px;
}

/* Button to toggle biography */
.btn-bio{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:8px 16px;
  border-radius:999px;
  font-size:.84rem;
  font-weight:700;
  color:var(--accent);
  border:1px solid rgba(91,140,255,.3);
  background:rgba(91,140,255,.06);
  cursor:pointer;
  transition:background .2s,border-color .2s,transform .2s;
}
.btn-bio:hover{
  background:rgba(91,140,255,.12);
  border-color:var(--accent);
  transform:translateY(-2px);
}

/* ========== SECTION WRAPPER ========== */
.section{position:relative;z-index:1;padding:100px 0}
.section-inner{max-width:1100px;margin:0 auto;padding:0 28px}
.section-label{
  font-size:.75rem;font-weight:700;
  text-transform:uppercase;letter-spacing:.14em;
  color:var(--accent);
  margin-bottom:12px;
}
.section-title{
  font-family:var(--font-head);
  font-size:clamp(1.8rem,3.5vw,2.6rem);
  font-weight:800;
  color:var(--text);
  letter-spacing:-.02em;
  line-height:1.15;
}

/* ========== ABOUT ========== */
.about-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:48px;
  align-items:start;
  margin-top:40px;
}
.about-text{color:var(--text-muted);font-size:1rem;line-height:1.8}
.about-text p+p{margin-top:14px}
.pillars{display:grid;gap:16px}
.pillar{
  display:flex;gap:18px;align-items:flex-start;
  padding:20px;border-radius:18px;
  border:1px solid var(--border);
  background:var(--surface);
  transition:border-color .25s, background .25s, transform .25s;
}
.pillar:hover{
  border-color:rgba(91,140,255,.25);
  background:var(--surface-hover);
  transform:translateX(4px);
}
.pillar-icon{
  width:42px;height:42px;border-radius:14px;flex-shrink:0;
  background:linear-gradient(135deg,rgba(91,140,255,.15),rgba(139,92,246,.15));
  border:1px solid rgba(91,140,255,.15);
  display:flex;align-items:center;justify-content:center;
  font-size:1.2rem;
}
.pillar-title{font-weight:700;font-size:.92rem;color:#fff;margin-bottom:3px}
.pillar-desc{font-size:.82rem;color:var(--text-muted)}

/* ========== SKILLS ========== */
.skills-tabs{
  display:flex;gap:8px;flex-wrap:wrap;margin-top:36px;
}
.skill-tab{
  padding:9px 18px;border-radius:999px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text-muted);
  font-size:.82rem;font-weight:600;
  cursor:pointer;
  transition:all .2s;
}
.skill-tab:hover{border-color:rgba(255,255,255,.2);color:var(--text)}
.skill-tab.active{
  border-color:rgba(91,140,255,.4);
  background:rgba(91,140,255,.1);
  color:var(--accent);
}
.skills-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:10px;
  margin-top:20px;
  min-height:120px;
}
.skill-chip{
  display:flex;align-items:center;gap:10px;
  padding:12px 16px;border-radius:14px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  font-size:.84rem;font-weight:600;
  cursor:pointer;
  transition:all .22s;
  animation:chip-in .35s ease both;
}
@keyframes chip-in{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.skill-chip:hover{
  border-color:rgba(91,140,255,.3);
  background:var(--surface-hover);
  transform:translateY(-2px);
  box-shadow:0 8px 24px rgba(0,0,0,.2);
}
.skill-chip[hidden]{display:none!important}
.skill-chip .ico{font-size:1rem}

/* ========== PROJECTS ========== */
.projects-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:20px;
  margin-top:40px;
}
.project-card{
  padding:28px;border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--surface);
  transition:border-color .3s, transform .3s, box-shadow .3s;
  position:relative;overflow:hidden;
}
.project-card::before{
  content:'';position:absolute;
  top:-60px;right:-60px;
  width:180px;height:180px;
  border-radius:50%;
  background:radial-gradient(circle,rgba(91,140,255,.08),transparent 70%);
  pointer-events:none;
  transition:opacity .3s;
}
.project-card:hover{
  border-color:rgba(91,140,255,.3);
  transform:translateY(-4px);
  box-shadow:0 20px 60px rgba(0,0,0,.25);
}
.project-card:hover::before{opacity:1.5}
.project-card.muted{opacity:.55}
.project-card.muted:hover{opacity:.75}
.project-status{
  display:inline-flex;align-items:center;gap:6px;
  font-size:.72rem;font-weight:700;
  text-transform:uppercase;letter-spacing:.08em;
  margin-bottom:14px;
}
.status-dot{width:6px;height:6px;border-radius:50%}
.status-live .status-dot{background:#34d399;box-shadow:0 0 6px #34d399}
.status-live{color:#34d399}
.status-soon .status-dot{background:var(--text-muted)}
.status-soon{color:var(--text-muted)}
.project-card h3{
  font-family:var(--font-head);
  font-size:1.15rem;font-weight:700;
  color:var(--text);line-height:1.3;
  margin-bottom:10px;
}
.project-card p{
  font-size:.84rem;color:var(--text-muted);
  line-height:1.65;margin-bottom:18px;
}
.project-tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:20px}
.project-tag{
  font-size:.72rem;font-weight:600;
  padding:5px 11px;border-radius:999px;
  border:1px solid var(--border);
  color:var(--text-muted);
  background:rgba(255,255,255,.03);
}
.btn-case{
  display:inline-flex;align-items:center;gap:6px;
  font-size:.82rem;font-weight:700;
  color:var(--accent);
  padding:9px 18px;border-radius:999px;
  border:1px solid rgba(91,140,255,.3);
  background:rgba(91,140,255,.06);
  transition:background .2s, border-color .2s;
}
.btn-case:hover{background:rgba(91,140,255,.12);border-color:var(--accent)}

/* ========== CONTACT ========== */
.contact-wrap{
  max-width:640px;margin:40px auto 0;text-align:center;
}
.contact-desc{
  color:var(--text-muted);font-size:1rem;
  margin-bottom:32px;line-height:1.7;
}
.contact-btns{
  display:flex;gap:12px;justify-content:center;flex-wrap:wrap;
  position:relative;
}
.btn-contact{
  display:inline-flex;align-items:center;gap:8px;
  padding:12px 22px;border-radius:999px;
  font-size:.88rem;font-weight:700;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  cursor:pointer;
  transition:all .22s;
  position:relative;
}
/* When hovering contact buttons (LinkedIn/GitHub) apply the same glowing gradient used on the email button */
.btn-contact:hover{
  border-color:transparent;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;
  box-shadow:0 8px 28px rgba(91,140,255,.3);
  transform:translateY(-2px);
}
/* Primary contact button removed: we want uniform style and highlight only on hover */
.btn-contact.primary{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border-color:transparent;color:#fff;
  box-shadow:0 8px 28px rgba(91,140,255,.3);
}
/* The email button keeps its gradient by default; hovering it slightly increases the glow */
.btn-contact.primary:hover{
  box-shadow:0 12px 36px rgba(91,140,255,.45);
  border-color:transparent;
  color:#fff;
}
/* email popover */
.email-pop{
  position:absolute;
  bottom:calc(100% + 14px);left:50%;
  transform:translateX(-50%) translateY(6px);
  opacity:0;pointer-events:none;
  transition:transform .22s, opacity .22s;
  width:280px;
  background:#1a1e2a;border:1px solid rgba(255,255,255,.12);
  border-radius:14px;padding:14px;
  box-shadow:0 20px 50px rgba(0,0,0,.4);
  z-index:50;
}

/* Theme toggle button */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:42px;
  height:42px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  cursor:pointer;
  transition:transform .15s ease, background .2s ease, border-color .2s ease;
}
.theme-toggle:hover{
  transform:translateY(-2px);
  border-color:transparent;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;
  box-shadow:0 8px 24px var(--accent-glow);
}

/* Increase icon size inside theme toggle */
.theme-toggle span{
  font-size:1.25rem;
  line-height:1;
}

/* Language toggle button: similar to theme toggle but switches between FR and EN */
.lang-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:42px;
  height:42px;
  margin-left:10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  cursor:pointer;
  transition:background .2s ease, transform .15s ease, border-color .2s ease;
}
.lang-toggle:hover{
  transform:translateY(-2px);
  background:var(--surface-hover);
  border-color:var(--accent);
}
.email-pop.show{opacity:1;pointer-events:auto;transform:translateX(-50%) translateY(0)}
.email-pop-row{display:flex;align-items:center;justify-content:space-between;gap:10px}
.email-addr{font-size:.84rem;font-weight:700;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.copy-btn{
  width:32px;height:32px;border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(91,140,255,.1);color:var(--accent);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;transition:background .2s;flex-shrink:0;
}
.copy-btn:hover{background:rgba(91,140,255,.2)}
.copy-hint{font-size:.72rem;color:var(--text-muted);margin-top:8px;text-align:center}
.email-pop::after{
  content:'';position:absolute;
  bottom:-6px;left:50%;transform:translateX(-50%) rotate(45deg);
  width:12px;height:12px;
  background:#1a1e2a;
  border-right:1px solid rgba(255,255,255,.12);
  border-bottom:1px solid rgba(255,255,255,.12);
}

/* ========== FOOTER ========== */
.footer{
  position:relative;z-index:1;
  text-align:center;padding:40px 0;
  border-top:1px solid var(--border);
  color:var(--text-muted);
  font-size:.78rem;font-weight:500;
}

/* ========== REVEAL ========== */
.reveal{
  opacity:0;transform:translateY(22px);
  transition:opacity .6s cubic-bezier(.22,1,.36,1), transform .6s cubic-bezier(.22,1,.36,1);
}
.reveal.show{opacity:1;transform:translateY(0)}
.reveal-d1{transition-delay:.1s}
.reveal-d2{transition-delay:.2s}
.reveal-d3{transition-delay:.3s}

/* ========== RESPONSIVE ========== */

/* ‚îÄ‚îÄ‚îÄ TABLET (‚â§ 900px) ‚îÄ‚îÄ‚îÄ */
@media(max-width:900px){
  .hero-inner{grid-template-columns:1fr;gap:40px;text-align:center}
  .avatar-wrap{width:240px;height:240px}
  .hero-desc{max-width:none}
  .hero-ctas{justify-content:center}
  .about-grid{grid-template-columns:1fr}
  .projects-grid{grid-template-columns:1fr}
  .pill{justify-content:center}

  /* Nav: hide text labels, keep icon-size buttons */
  .nav-links a{padding:8px 10px;font-size:.82rem}
  .logo{font-size:1.1rem}
}

/* ‚îÄ‚îÄ‚îÄ MOBILE (‚â§ 680px) ‚îÄ‚îÄ‚îÄ */
@media(max-width:680px){

  /* --- Nav: hamburger-style compact row --- */
  .nav-inner{
    padding:0 16px;
    /* allow items to wrap if they still overflow */
    flex-wrap:wrap;
    gap:6px;
  }
  .logo{font-size:1rem;gap:8px}
  .logo-ring{width:30px;height:30px;font-size:.65rem}

  /* Shrink nav links area; hide CV text, keep icon */
  .nav-links{gap:2px;flex-wrap:wrap;justify-content:flex-end}
  .nav-links a{padding:7px 8px;font-size:.78rem}
  .btn-cv{padding:7px 10px;font-size:.75rem}
  .btn-cv .cv-label{display:none} /* hide "CV" text, keep ‚§ì */
  .theme-toggle,.lang-toggle{width:36px;height:36px;margin-left:4px}

  /* --- Hero --- */
  .hero{padding:90px 0 50px;min-height:auto}
  .hero-inner{padding:0 16px;gap:28px}
  .hero h1{font-size:clamp(2rem,7vw,2.6rem)}
  .hero-desc{font-size:.95rem}
  .hero-ctas{flex-direction:column;align-items:center;gap:10px}
  .btn-main,.btn-outline{width:100%;max-width:280px;justify-content:center}

  /* Avatar smaller on mobile */
  .avatar-wrap{width:180px;height:180px}
  .avatar-column{gap:10px}

  /* Bio overlay: full-width sheet instead of centred popup */
  .bio-overlay{
    position:fixed;
    top:auto;bottom:0;left:0;
    width:100%;max-width:100%;max-height:70vh;
    transform:translateY(100%);
    border-radius:24px 24px 0 0;
    padding:28px 20px 40px;
    z-index:200;
  }
  .bio-overlay.show{
    transform:translateY(0);
  }
  /* drag-handle hint at top */
  .bio-overlay::before{
    content:'';display:block;
    width:40px;height:4px;border-radius:2px;
    background:var(--border);
    margin:0 auto 16px;
  }

  /* --- Sections --- */
  .section{padding:60px 0}
  .section-inner{padding:0 16px}

  /* --- About pillars --- */
  .about-grid{gap:28px}
  .pillar{padding:16px;gap:14px}

  /* --- Skills --- */
  .skills-tabs{gap:6px}
  .skill-tab{padding:8px 12px;font-size:.78rem}
  .skills-grid{grid-template-columns:repeat(2,1fr);gap:8px}
  .skill-chip{padding:10px 12px;font-size:.82rem}

  /* --- Projects --- */
  .projects-grid{gap:16px}
  .project-card{padding:22px}

  /* --- Contact --- */
  .contact-btns{flex-direction:column;align-items:stretch;gap:10px}
  .btn-contact{justify-content:center;padding:14px 18px}

  /* Email popover: position below button on mobile */
  .email-pop{
    position:relative;
    bottom:auto;left:auto;
    transform:none;
    width:100%;
    margin-top:10px;
    border-radius:14px;
  }
  .email-pop.show{transform:none}
  .email-pop::after{display:none} /* hide arrow */

  /* --- Footer --- */
  .footer{padding:28px 16px}
}

/* ‚îÄ‚îÄ‚îÄ SMALL MOBILE (‚â§ 380px) ‚îÄ‚îÄ‚îÄ */
@media(max-width:380px){
  .hero h1{font-size:1.9rem}
  .nav-links a span{font-size:.72rem}
  .skills-grid{grid-template-columns:1fr}
  .skill-chip{padding:10px 14px}
  .avatar-wrap{width:150px;height:150px}
}
</style>
</head>
<body>

<div class="scroll-bar" id="scrollBar"></div>
<div class="bg-mesh" aria-hidden="true"></div>
<div class="bg-grid" aria-hidden="true"></div>

<nav class="nav" id="mainNav">
  <div class="nav-inner">
    <a href="#hero" class="logo">
      <span class="logo-ring">RM</span>
      Rafael Midolli
    </a>
    <div class="nav-links">
      <a href="#about" class="nav-link"><span class="lang-fr">√Ä propos</span><span class="lang-en">About</span></a>
      <a href="#skills" class="nav-link"><span class="lang-fr">Comp√©tences</span><span class="lang-en">Skills</span></a>
      <a href="#projects" class="nav-link"><span class="lang-fr">Projets</span><span class="lang-en">Projects</span></a>
      <a href="#contact" class="nav-link"><span class="lang-fr">Contact</span><span class="lang-en">Contact</span></a>
      <a href="assets/docs/CV_Rafael_Midolli_2026.pdf" target="_blank" rel="noopener" class="btn-cv">‚§ì <span class="cv-label">CV</span></a>
      <button class="theme-toggle" id="themeToggle" type="button" aria-label="Changer de th√®me" title="Changer de th√®me (clair/sombre)">
        <span id="themeIcon">üåô</span>
      </button>
      <button class="lang-toggle" id="langToggle" type="button" aria-label="Changer de langue" title="Changer de langue (FR/EN)">
        <span id="langIcon">FR</span>
      </button>
    </div>
  </div>
</nav>

<section class="hero" id="hero">
  <div class="hero-inner">
    <div>
      <div class="pill reveal"><span class="pill-dot"></span> Business Analyst ‚Äî Retail &amp; FMCG</div>
      <h1 class="reveal reveal-d1">
        <span class="lang-fr">Donn√©es brutes<br/>‚Üí <em>d√©cisions nettes.</em></span>
        <span class="lang-en">Raw data<br/>‚Üí <em>clear decisions.</em></span>
      </h1>
      <p class="hero-desc reveal reveal-d2">
        <span class="lang-fr">Je transforme des donn√©es commerciales complexes en diagnostics actionnables : segmentation, KPI, benchmark, priorisation ‚Äî pens√©s pour d√©cider vite sur le terrain.</span>
        <span class="lang-en">I turn complex commercial data into actionable diagnostics: segmentation, KPIs, benchmarks and prioritization¬†‚Äî designed for fast, field‚Äëready decision making.</span>
      </p>
      <div class="hero-ctas reveal reveal-d3">
        <a href="#projects" class="btn-main">
          <span class="lang-fr">Voir les projets</span>
          <span class="lang-en">See projects</span>
          <span>‚Üí</span>
        </a>
        <button class="btn-bio" id="bioToggleBtn" type="button">
          <span class="lang-fr">Biographie</span>
          <span class="lang-en">Biography</span>
        </button>
      </div>
    </div>

    <div class="avatar-column reveal reveal-d2">
      <div class="avatar-wrap">
        <div class="avatar-blob"></div>
        <div class="avatar-ring"></div>
        <div class="avatar-ring-2"></div>
        <div class="avatar-img-wrap">
          <img src="assets/img/photo_bio.jpg" alt="Portrait de Rafael Midolli"/>
        </div>
        <div class="bio-overlay" id="bioOverlay">
          <button class="bio-close" id="bioCloseBtn" type="button" aria-label="Fermer">‚úï</button>
          
          <div class="bio-content lang-fr">
            <p>Business Analyst avec quatre ans d‚Äôexp√©rience dans l‚Äôagroalimentaire et la grande consommation, j'ai construit mon parcours au sein de leaders comme Colgate-Palmolive et Kantar Worldpanel.</p>
            <p>Dipl√¥m√© en ing√©nierie et titulaire d‚Äôun MBA en Intelligence Artificielle, je combine expertise technique et vision business pour transformer les donn√©es en strat√©gies concr√®tes. J'ai notamment pilot√© la performance commerciale pour des marques majeures telles que Lactalis et Tetra Pak.</p>
            <p>Aujourd'hui bas√© en France, je recherche une opportunit√© data-driven pour accompagner les d√©cisions strat√©giques et les actions des √©quipes terrain.</p>
          </div>
          
          <div class="bio-content lang-en">
            <p>Business Analyst with four years of experience in agrifood and consumer goods (FMCG), I built my career at market leaders like Colgate-Palmolive and Kantar Worldpanel.</p>
            <p>Holding an Engineering degree and an MBA in AI, I combine technical skills with business vision to transform data into actionable strategies. I have managed commercial performance for major brands such as Lactalis and Tetra Pak.</p>
            <p>Currently based in France, I am seeking a data-driven role to support strategic decisions and drive field team actions.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="about">
  <div class="section-inner">
    <div class="section-label reveal">
      <span class="lang-fr">√Ä propos</span><span class="lang-en">About</span>
    </div>
    <h2 class="section-title reveal reveal-d1">
      <span class="lang-fr">Ce qui me distingue</span><span class="lang-en">What sets me apart</span>
    </h2>

    <div class="about-grid">
      <div class="about-text reveal reveal-d1">
        <p>
          <span class="lang-fr">Business Analyst sp√©cialis√© en Retail &amp; PGC (FMCG), je construis des analyses qui passent directement √† l'action. Mon approche¬†: partir des donn√©es, structurer un diagnostic clair, et le rendre exploitable pour les √©quipes ventes, marketing ou direction.</span>
          <span class="lang-en">Business analyst specialised in retail and FMCG, I build analyses that lead directly to action. My approach: start from the data, structure a clear diagnosis, and make it usable for sales, marketing or management teams.</span>
        </p>
        </div>

      <div class="pillars reveal reveal-d2">
        <div class="pillar">
          <div class="pillar-icon">üìå</div>
          <div>
            <div class="pillar-title"><span class="lang-fr">Diagnostics actionnables</span><span class="lang-en">Actionable diagnostics</span></div>
            <div class="pillar-desc"><span class="lang-fr">Segmentation, benchmark, gap analysis, priorisation Pareto ‚Üí plan d'action concret.</span><span class="lang-en">Segmentation, benchmark, gap analysis, Pareto prioritisation ‚Üí concrete action plan.</span></div>
          </div>
        </div>
        <div class="pillar">
          <div class="pillar-icon">üß©</div>
          <div>
            <div class="pillar-title"><span class="lang-fr">Storytelling orient√© d√©cision</span><span class="lang-en">Decision‚Äëoriented storytelling</span></div>
            <div class="pillar-desc"><span class="lang-fr">Rendre une analyse lisible et exploitable pour ventes, marketing ou direction.</span><span class="lang-en">Make an analysis readable and usable for sales, marketing or management.</span></div>
          </div>
        </div>
        <div class="pillar">
          <div class="pillar-icon">üîÅ</div>
          <div>
            <div class="pillar-title"><span class="lang-fr">Analyses reproductibles</span><span class="lang-en">Reproducible analyses</span></div>
            <div class="pillar-desc"><span class="lang-fr">Scripts versionn√©s, donn√©es propres, r√©sultats v√©rifiables du d√©but √† la fin.</span><span class="lang-en">Versioned scripts, clean data, verifiable results from start to finish.</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="skills" style="padding-top:20px">
  <div class="section-inner">
    <div class="section-label reveal"><span class="lang-fr">Comp√©tences</span><span class="lang-en">Skills</span></div>
    <h2 class="section-title reveal reveal-d1"><span class="lang-fr">Stack &amp; savoir‚Äëfaire</span><span class="lang-en">Stack &amp; expertise</span></h2>

    <div class="skills-tabs reveal reveal-d1" id="skillsTabs">
      <button class="skill-tab active" data-tab="analytics">üìà Analytics</button>
      <button class="skill-tab" data-tab="bi">üìä BI &amp; Reporting</button>
      <button class="skill-tab" data-tab="workflow">üîß Workflow</button>
    </div>

    <div class="skills-grid" id="skillsGrid">
      <div class="skill-chip" data-scope="analytics"><span class="ico">üóÑÔ∏è</span> SQL</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üêç</span> Python</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üì¶</span> Pandas</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üìâ</span> Plotly</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üéØ</span> KPI Design</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üß©</span> Segmentation</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">üîé</span> Diagnostic</div>
      <div class="skill-chip" data-scope="analytics"><span class="ico">‚úçÔ∏è</span> Storytelling</div>
      <div class="skill-chip" data-scope="bi" hidden><span class="ico">üìä</span> Power BI</div>
      <div class="skill-chip" data-scope="bi" hidden><span class="ico">‚ûó</span> DAX</div>
      <div class="skill-chip" data-scope="bi" hidden><span class="ico">üß±</span> Data Modeling</div>
      <div class="skill-chip" data-scope="bi" hidden><span class="ico">üìã</span> Dashboards</div>
      <div class="skill-chip" data-scope="bi" hidden><span class="ico">üìë</span> Reporting</div>
      <div class="skill-chip" data-scope="workflow" hidden><span class="ico">ü¶Ü</span> DuckDB</div>
      <div class="skill-chip" data-scope="workflow" hidden><span class="ico">üìÑ</span> CSV / Parquet</div>
      <div class="skill-chip" data-scope="workflow" hidden><span class="ico">üîÄ</span> Git / GitHub</div>
      <div class="skill-chip" data-scope="workflow" hidden><span class="ico">üìì</span> Jupyter</div>
      <div class="skill-chip" data-scope="workflow" hidden><span class="ico">‚úÖ</span> Data Quality</div>
    </div>
  </div>
</section>

<section class="section" id="projects">
  <div class="section-inner">
    <div class="section-label reveal"><span class="lang-fr">Projets</span><span class="lang-en">Projects</span></div>
    <h2 class="section-title reveal reveal-d1"><span class="lang-fr">Ce que je livre</span><span class="lang-en">What I deliver</span></h2>

    <div class="projects-grid">
      <article class="project-card reveal reveal-d1">
        <div class="project-status status-live"><span class="status-dot"></span> <span class="lang-fr">Publi√©</span><span class="lang-en">Published</span></div>
        <h3>Retail BA Diagnostic ‚Äî Segmentation &amp; Opportunity Mapping</h3>
        <p>
          <span class="lang-fr">Diagnostic global avec priorisation Pareto. Segmentation des points de vente, gap vs benchmark, et dashboard interactif Plotly pour une d√©cision rapide.</span>
          <span class="lang-en">Comprehensive diagnostic with Pareto prioritisation. Store segmentation, gap versus benchmark, and interactive Plotly dashboard for quick decision‚Äëmaking.</span>
        </p>
        <div class="project-tags">
          <span class="project-tag">Segmentation</span>
          <span class="project-tag">Pareto</span>
          <span class="project-tag">Plotly</span>
          <span class="project-tag">Python</span>
        </div>
        <a href="project-retail.html" class="btn-case">
          <span class="lang-fr">Ouvrir le cas</span><span class="lang-en">Open case</span>
          <span>‚Üí</span>
        </a>
      </article>

      <article class="project-card muted reveal reveal-d2">
        <div class="project-status status-soon"><span class="status-dot"></span> <span class="lang-fr">En cours</span><span class="lang-en">In progress</span></div>
        <h3><span class="lang-fr">Customer Segmentation ‚Äî Insights &amp; Recommandations</span><span class="lang-en">Customer Segmentation ‚Äî Insights &amp; Recommendations</span></h3>
        <p>
          <span class="lang-fr">Analyse comportementale client avec KPI cl√©s et recommandations strat√©giques. Format case study complet.</span>
          <span class="lang-en">Customer behavioural analysis with key KPIs and strategic recommendations. Full case study format.</span>
        </p>
        <div class="project-tags">
          <span class="project-tag">Segmentation</span>
          <span class="project-tag">KPI</span>
          <span class="project-tag">Insights</span>
        </div>
        <span class="btn-case" style="opacity:.5;pointer-events:none"><span class="lang-fr">Bient√¥t</span><span class="lang-en">Soon</span></span>
      </article>

      <article class="project-card muted reveal reveal-d3">
        <div class="project-status status-soon"><span class="status-dot"></span> <span class="lang-fr">Planifi√©</span><span class="lang-en">Planned</span></div>
        <h3><span class="lang-fr">Analytics Assistant ‚Äî GenAI &amp; RAG</span><span class="lang-en">Analytics Assistant ‚Äî GenAI &amp; RAG</span></h3>
        <p>
          <span class="lang-fr">Assistant m√©tier pour l'exploration de donn√©es avec retrieval augment√©. Demo via Streamlit.</span>
          <span class="lang-en">Business assistant for data exploration with augmented retrieval. Demo via Streamlit.</span>
        </p>
        <div class="project-tags">
          <span class="project-tag">RAG</span>
          <span class="project-tag">Agents</span>
          <span class="project-tag">Streamlit</span>
        </div>
        <span class="btn-case" style="opacity:.5;pointer-events:none"><span class="lang-fr">Bient√¥t</span><span class="lang-en">Soon</span></span>
      </article>
    </div>
  </div>
</section>

<section class="section" id="contact">
  <div class="section-inner">
    <div class="contact-wrap">
      <div class="section-label reveal" style="text-align:center">
        <span class="lang-fr">Contact</span><span class="lang-en">Contact</span>
      </div>
      <h2 class="section-title reveal reveal-d1" style="text-align:center">
        <span class="lang-fr">Travaillons ensemble</span><span class="lang-en">Let's work together</span>
      </h2>
      <p class="contact-desc reveal reveal-d1">
        <span class="lang-fr">Disponible pour des missions BA en France. Un √©change rapide par email ou LinkedIn¬†?</span>
        <span class="lang-en">Available for BA projects in France. A quick exchange by email or LinkedIn?</span>
      </p>

      <div class="contact-btns reveal reveal-d2">
        <button class="btn-contact" id="emailBtn" type="button">
          ‚úâÔ∏è &nbsp;Email
        </button>

        <div class="email-pop" id="emailPop">
          <div class="email-pop-row">
            <span class="email-addr" id="emailText">rbmidolli@gmail.com</span>
            <button class="copy-btn" id="copyBtn" type="button" aria-label="Copier">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <rect x="9" y="9" width="13" height="13" rx="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
            </button>
          </div>
          <div class="copy-hint" id="copyHint"></div>
        </div>

        <a class="btn-contact" href="https://www.linkedin.com/in/rafael-midolli/" target="_blank" rel="noopener">
          in &nbsp;LinkedIn
        </a>
        <a class="btn-contact" href="https://github.com/R-midolli" target="_blank" rel="noopener">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 19c-4 1.5-4-2.5-5-3m10 6v-3.5c0-1 .1-1.4-.5-2 2 0 4-.2 5-1 1.2-1 .8-3 .3-4.2A3 3 0 0 0 19 7s-1-.3-3 1.2a10 10 0 0 0-6 0C8 6.7 7 7 7 7a3 3 0 0 0-.3 4.3c-.5 1.2-.9 3.2.3 4.2 1 .8 3 1 5 1-.6.6-.6 1.2-.5 2V22"/>
          </svg>
          GitHub
        </a>
      </div>
    </div>
  </div>
</section>

<footer class="footer">¬© 2026 ‚Äî Rafael Midolli ‚Äî Portfolio Business Analyst</footer>

<script>
(function(){
  const $ = s => document.querySelector(s);
  const $$ = s => [...document.querySelectorAll(s)];

  // --- scroll progress ---
  const scrollBar = $('#scrollBar');
  function onScroll(){
    const d = document.documentElement;
    const max = d.scrollHeight - d.clientHeight;
    scrollBar.style.width = (max > 0 ? (d.scrollTop/max)*100 : 0) + '%';

    // nav
    $('#mainNav').classList.toggle('scrolled', d.scrollTop > 40);

    // fade out the avatar progressively as the user scrolls through the whole page
    const avatarCol = document.querySelector('.avatar-column');
    if(avatarCol){
      const pageHeight = d.scrollHeight - d.clientHeight;
      // Compute scroll progress relative to the full page height; fade gradually until 60% of page scrolled
      const progress = Math.min(d.scrollTop / (pageHeight * 0.6), 1);
      avatarCol.style.opacity = 1 - progress;
      avatarCol.style.transform = `translateY(${progress * 40}px)`;
    }
  }
  window.addEventListener('scroll', onScroll, {passive:true});
  onScroll();

  // --- reveal on scroll ---
  const io = new IntersectionObserver(entries => {
    entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('show') });
  }, {threshold:0.12});
  $$('.reveal').forEach(el => io.observe(el));

  // --- scrollspy ---
  const navLinks = $$('.nav-link');
  const sections = ['about','skills','projects','contact'].map(id => document.getElementById(id));

  const ioSpy = new IntersectionObserver(entries => {
    const vis = entries.filter(e => e.isIntersecting)
      .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
    if(vis){
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#'+vis.target.id));
    }
  }, {threshold:[.15,.3,.5], rootMargin:'-15% 0px -55% 0px'});
  sections.forEach(s => ioSpy.observe(s));

  // --- skills tabs ---
  const tabs = $('#skillsTabs');
  const chips = $$('.skill-chip');

  tabs.addEventListener('click', e => {
    const btn = e.target.closest('.skill-tab');
    if(!btn) return;
    $$('.skill-tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
    const scope = btn.dataset.tab;
    chips.forEach((ch,i) => {
      const visible = ch.dataset.scope === scope;
      ch.hidden = !visible;
      if(visible) ch.style.animationDelay = (i%8)*.06+'s';
    });
  });

  // --- email popover ---
  const emailBtn = $('#emailBtn');
  const emailPop = $('#emailPop');
  const copyBtn = $('#copyBtn');
  const copyHint = $('#copyHint');

  emailBtn.addEventListener('click', e => {
    e.stopPropagation();
    emailPop.classList.toggle('show');
  });
  copyBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText($('#emailText').textContent.trim());
      const lang = getLang();
      copyHint.textContent = lang === 'fr' ? '‚úì Copi√© !' : '‚úì Copied!';
      setTimeout(() => setCopyHintDefault(), 1400);
    } catch {
      const lang = getLang();
      copyHint.textContent = lang === 'fr' ? 'Copie impossible' : 'Copy failed';
    }
  });
  document.addEventListener('click', e => {
    if(!emailPop.classList.contains('show')) return;
    if(!emailPop.contains(e.target) && !emailBtn.contains(e.target)) emailPop.classList.remove('show');
  });
  document.addEventListener('keydown', e => { if(e.key==='Escape') emailPop.classList.remove('show'); });

  // --- biography toggle ---
  const bioBtn = $('#bioToggleBtn');
  const bioOverlay = document.getElementById('bioOverlay');
  if(bioBtn && bioOverlay){
    bioBtn.addEventListener('click', e => {
      e.stopPropagation();
      bioOverlay.classList.toggle('show');
    });
    // Close overlay when clicking the close button
    const bioClose = document.getElementById('bioCloseBtn');
    if(bioClose){
      bioClose.addEventListener('click', () => {
        bioOverlay.classList.remove('show');
      });
    }
    // Close biography overlay when clicking outside or pressing Escape
    document.addEventListener('click', e => {
      if(!bioOverlay.classList.contains('show')) return;
      if(!bioOverlay.contains(e.target) && !bioBtn.contains(e.target)) bioOverlay.classList.remove('show');
    });
    document.addEventListener('keydown', e => {
      if(e.key === 'Escape') bioOverlay.classList.remove('show');
    });
  }

  // --- theme toggle ---
  const themeBtn = document.getElementById('themeToggle');
  const themeIcon = document.getElementById('themeIcon');
  if(themeBtn && themeIcon){
    // Initialize theme: default to dark unless a preference is saved
    const saved = localStorage.getItem('theme');
    const initial = saved ? saved : 'dark';
    document.documentElement.dataset.theme = initial;
    themeIcon.textContent = initial === 'light' ? '‚òÄÔ∏è' : 'üåô';
    themeBtn.addEventListener('click', () => {
      const next = document.documentElement.dataset.theme === 'light' ? 'dark' : 'light';
      document.documentElement.dataset.theme = next;
      localStorage.setItem('theme', next);
      themeIcon.textContent = next === 'light' ? '‚òÄÔ∏è' : 'üåô';
    });
  }

  // --- language toggle ---
  const langBtn = document.getElementById('langToggle');
  const langIcon = document.getElementById('langIcon');
  // Helper to get current language
  function getLang(){
    return document.documentElement.dataset.lang || 'fr';
  }
  // Set default copy hint message based on current language
  function setCopyHintDefault(){
    if(typeof copyHint !== 'undefined' && copyHint){
      const lang = getLang();
      copyHint.textContent = lang === 'fr' ? 'Cliquez pour copier' : 'Click to copy';
    }
  }
  // Set site language and update toggle text
  function setLanguage(lang){
    document.documentElement.dataset.lang = lang;
    // Also update the native lang attribute for accessibility
    document.documentElement.lang = lang;
    localStorage.setItem('lang', lang);
    if(langIcon) langIcon.textContent = lang.toUpperCase();
    setCopyHintDefault();
  }
  if(langBtn && langIcon){
    const savedLang = localStorage.getItem('lang');
    // Default to French unless a preference is saved
    setLanguage(savedLang || 'fr');
    langBtn.addEventListener('click', () => {
      const nextLang = getLang() === 'fr' ? 'en' : 'fr';
      setLanguage(nextLang);
    });
  }
})();
</script>
</body>
</html>